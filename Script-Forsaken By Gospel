print("Script inicializado by Gospel")

local function call_space_action()
    if type(_G.Gospel_OnSpace) == "function" then
        _G.Gospel_OnSpace()
        return
    end
    if type(main) == "function" then
        main()
        return
    end
    if type(Solve) == "function" then
        Solve()
        return
    end
end

local function bind_space_roblox()
    local UIS = game:GetService("UserInputService")
    local locked = false
    local function fire_once()
        if locked then return end
        locked = true
        local ok, err = pcall(call_space_action)
        if not ok then warn("Gospel space action error: ", err) end
        task.delay(0.2, function() locked = false end)
    end
    local conn = UIS.InputBegan:Connect(function(input, gpe)
        if gpe then return end
        if input.KeyCode == Enum.KeyCode.Space then
            fire_once()
        end
    end)
    return function()
        if conn then conn:Disconnect() end
    end
end

local function is_roblox_env()
    local ok = pcall(function()
        local _ = game:GetService("UserInputService")
    end)
    return ok
end

function GospelBindSpace(fn)
    if type(fn) == "function" then
        _G.Gospel_OnSpace = fn
    end
    if is_roblox_env() then
        return bind_space_roblox()
    else
        return function() end
    end
end

if _G.Gospel_AutoBind ~= false then
    GospelBindSpace()
end

return { GospelBindSpace = GospelBindSpace }
